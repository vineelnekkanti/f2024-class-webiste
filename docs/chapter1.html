<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Biagio Palese">
<meta name="dcterms.date" content="2024-08-24">

<title>Chapter 1: Manipulations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/logo_2.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">FALL 2024: OMIS-482 by Dr.&nbsp;B</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./course-overview.html"> 
<span class="menu-text">Course Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Faculty</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://omis482syllabusfall2024.netlify.app/"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://omis482syllabusfall2024.netlify.app/schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./student-dashboard.html"> 
<span class="menu-text">Dr.B Learning Leaderboard</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./useful-links.html"> 
<span class="menu-text">Useful Links</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://webcourses.niu.edu/ultra/courses/_348339_1/outline" title="Blackboard" class="quarto-navigation-tool px-1" aria-label="Blackboard" target="_blank"><i class="bi bi-backpack-fill"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Chapter 1: Manipulations</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
  <div id="quarto-announcement" data-announcement-id="a645c7d35ee9e585a4db2f95ebed85bd" class="alert alert-primary hidden"><i class="bi bi-megaphone quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>Hello Class! Welcome to OMIS-482! I hope you guys have a wonderful semester &amp; All the Best!! -<strong>Dr.B</strong></p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/course_images/logo2.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Course Chapters</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 0</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 1</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">In-class Materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://omis482-week1-teaching-materials.netlify.app/" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Coding Checkups</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Practice R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coming-soon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practice Manipulations</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#manipulations" id="toc-manipulations" class="nav-link active" data-scroll-target="#manipulations">Manipulations</a>
  <ul class="collapse">
  <li><a href="#link-to-other-resources" id="toc-link-to-other-resources" class="nav-link" data-scroll-target="#link-to-other-resources">Link to other resources</a></li>
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link" data-scroll-target="#load-packages">Load packages</a></li>
  <li><a href="#get-to-know-your-data" id="toc-get-to-know-your-data" class="nav-link" data-scroll-target="#get-to-know-your-data">Get to know your data</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data types</a></li>
  <li><a href="#data-structures" id="toc-data-structures" class="nav-link" data-scroll-target="#data-structures">Data structures</a></li>
  <li><a href="#key-data-manipulation-dplyr-package-functions" id="toc-key-data-manipulation-dplyr-package-functions" class="nav-link" data-scroll-target="#key-data-manipulation-dplyr-package-functions">5 + 1 Key data manipulation (dplyr package) functions:</a></li>
  </ul></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter">Filter()</a>
  <ul class="collapse">
  <li><a href="#activity-1-filter" id="toc-activity-1-filter" class="nav-link" data-scroll-target="#activity-1-filter">Activity 1: Filter</a></li>
  </ul></li>
  <li><a href="#arrange" id="toc-arrange" class="nav-link" data-scroll-target="#arrange">Arrange()</a>
  <ul class="collapse">
  <li><a href="#activity-2-arrange" id="toc-activity-2-arrange" class="nav-link" data-scroll-target="#activity-2-arrange">Activity 2: Arrange</a></li>
  </ul></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select">Select()</a>
  <ul class="collapse">
  <li><a href="#activity-3-select" id="toc-activity-3-select" class="nav-link" data-scroll-target="#activity-3-select">Activity 3: Select</a></li>
  </ul></li>
  <li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate">Mutate()</a>
  <ul class="collapse">
  <li><a href="#activity-4-mutate" id="toc-activity-4-mutate" class="nav-link" data-scroll-target="#activity-4-mutate">Activity 4: Mutate</a></li>
  </ul></li>
  <li><a href="#summarise" id="toc-summarise" class="nav-link" data-scroll-target="#summarise">Summarise()</a></li>
  <li><a href="#summarise-group_by" id="toc-summarise-group_by" class="nav-link" data-scroll-target="#summarise-group_by">Summarise + group_by()</a>
  <ul class="collapse">
  <li><a href="#activity-5-summarise" id="toc-activity-5-summarise" class="nav-link" data-scroll-target="#activity-5-summarise">Activity 5: Summarise</a></li>
  <li><a href="#data-inside-r" id="toc-data-inside-r" class="nav-link" data-scroll-target="#data-inside-r">Data Inside R</a></li>
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data">Importing data</a></li>
  <li><a href="#writing-data" id="toc-writing-data" class="nav-link" data-scroll-target="#writing-data">Writing data</a></li>
  </ul></li>
  <li><a href="#pipes" id="toc-pipes" class="nav-link" data-scroll-target="#pipes">Pipes</a>
  <ul class="collapse">
  <li><a href="#combining-multiple-operations-with-the-pipe" id="toc-combining-multiple-operations-with-the-pipe" class="nav-link" data-scroll-target="#combining-multiple-operations-with-the-pipe">Combining multiple operations with the pipe</a></li>
  <li><a href="#activity-6-basic-pipes" id="toc-activity-6-basic-pipes" class="nav-link" data-scroll-target="#activity-6-basic-pipes">Activity 6: Basic pipes</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing values</a></li>
  <li><a href="#why-producing-counts-matters" id="toc-why-producing-counts-matters" class="nav-link" data-scroll-target="#why-producing-counts-matters">Why producing counts matters?</a></li>
  <li><a href="#recap-of-the-summary-functions" id="toc-recap-of-the-summary-functions" class="nav-link" data-scroll-target="#recap-of-the-summary-functions">Recap of the summary functions</a></li>
  <li><a href="#activity-7-summary-functions-p1-must-use-the-pipe" id="toc-activity-7-summary-functions-p1-must-use-the-pipe" class="nav-link" data-scroll-target="#activity-7-summary-functions-p1-must-use-the-pipe">Activity 7: Summary functions p1 (must use the pipe)</a></li>
  <li><a href="#activity-8-summary-functions-p2-must-use-the-pipe" id="toc-activity-8-summary-functions-p2-must-use-the-pipe" class="nav-link" data-scroll-target="#activity-8-summary-functions-p2-must-use-the-pipe">Activity 8: Summary functions p2 (must use the pipe)</a></li>
  <li><a href="#when-not-to-use-the-pipe" id="toc-when-not-to-use-the-pipe" class="nav-link" data-scroll-target="#when-not-to-use-the-pipe">When not to use the pipe</a></li>
  </ul></li>
  <li><a href="#now-that-you-know-how-to-manipulate-your-data.what-about-learning-how-to-visualize-them-see-you-for-more-in-the-next-chapter" id="toc-now-that-you-know-how-to-manipulate-your-data.what-about-learning-how-to-visualize-them-see-you-for-more-in-the-next-chapter" class="nav-link" data-scroll-target="#now-that-you-know-how-to-manipulate-your-data.what-about-learning-how-to-visualize-them-see-you-for-more-in-the-next-chapter">Now that you know how to manipulate your data.What about learning how to visualize them? See you for more in the next chapter!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Chapter 1: Manipulations</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Biagio Palese </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 24, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<script>
if (localStorage.getItem("isLoggedIn") !== "true") {
    window.location.href = "login.html";
}
</script>
<section id="manipulations" class="level2">
<h2 class="anchored" data-anchor-id="manipulations">Manipulations</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/course_images/manipulations.png" class="img-fluid figure-img"></p>
<figcaption>When working on a new dataset the beginning might not be easy</figcaption>
</figure>
</div>
<p>The following sections of our book R for Data Science( <a href="https://r4ds.hadley.nz">first portion of the course book</a> ) are included in the second week:</p>
<ul>
<li><a href="https://r4ds.hadley.nz/data-transform">Data Transformation</a>: Sections: from 3 to 3.3 &amp; part of 3.5 included</li>
</ul>
<section id="link-to-other-resources" class="level3">
<h3 class="anchored" data-anchor-id="link-to-other-resources">Link to other resources</h3>
<ul>
<li><p>Internal help: <a href="https://support.posit.co/hc/en-us">posit support</a></p></li>
<li><p>External help: <a href="https://stackoverflow.com/search?q=rstudio&amp;s=25d8522e-3191-4bf2-ae3b-ccad762aeca9">stackoverflow</a></p></li>
<li><p>Additional materials: <a href="https://posit.co/resources/">posit resources</a></p></li>
<li><p>Cheat Sheets: <a href="https://posit.co/resources/cheatsheets/">posit cheat sheets</a></p></li>
</ul>
<p>While I use the book as a reference the materials provided to you are custom made and include more activities and resources. If you understand the materials covered in this document there is no need to refer to other sources. If you have any troubles with the materials don’t hesitate to contact me or check the above sources.</p>
</section>
<section id="load-packages" class="level3">
<h3 class="anchored" data-anchor-id="load-packages">Load packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/environmental-data-science-r4ds-general.png" class="img-fluid figure-img"></p>
<figcaption>Data Science model: Artwork by <span class="citation" data-cites="allison_horst">@allison_horst</span></figcaption>
</figure>
</div>
</section>
<section id="get-to-know-your-data" class="level3">
<h3 class="anchored" data-anchor-id="get-to-know-your-data">Get to know your data</h3>
<div class="cell" data-exercise="false">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>flights<span class="co">#dataset we will use --&gt; make sure you run library(nycflights13) before running this line of code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     4      819            820        -1     1103           1129
 2  2013    12     5     1238           1110        88     1342           1223
 3  2013     8    19     1953           1959        -6     2141           2146
 4  2013     4    14      608            610        -2      752            754
 5  2013     4    29     1653           1700        -7     1815           1835
 6  2013     4     5     1813           1729        44     2026           1937
 7  2013     1    17     1740           1745        -5     2054           2120
 8  2013     2    26      834            815        19     1031           1010
 9  2013     2    20     1014           1000        14     1219           1221
10  2013     3    22     1741           1736         5     2024           2029
# ℹ 14,990 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>?flights <span class="co"># get a description of it</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#view(flights)# run this if you want to explore the entire dataset --&gt; which will open the dataset in the RStudio viewer.</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flights)<span class="co"># run this if you want a summary of the dataset </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 15,000
Columns: 19
$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
$ month          &lt;int&gt; 1, 12, 8, 4, 4, 4, 1, 2, 2, 3, 1, 2, 12, 8, 7, 9, 9, 12…
$ day            &lt;int&gt; 4, 5, 19, 14, 29, 5, 17, 26, 20, 22, 25, 18, 13, 5, 29,…
$ dep_time       &lt;int&gt; 819, 1238, 1953, 608, 1653, 1813, 1740, 834, 1014, 1741…
$ sched_dep_time &lt;int&gt; 820, 1110, 1959, 610, 1700, 1729, 1745, 815, 1000, 1736…
$ dep_delay      &lt;dbl&gt; -1, 88, -6, -2, -7, 44, -5, 19, 14, 5, 4, -2, -5, -7, 1…
$ arr_time       &lt;int&gt; 1103, 1342, 2141, 752, 1815, 2026, 2054, 1031, 1219, 20…
$ sched_arr_time &lt;int&gt; 1129, 1223, 2146, 754, 1835, 1937, 2120, 1010, 1221, 20…
$ arr_delay      &lt;dbl&gt; -26, 79, -5, -2, -20, 49, -26, 21, -2, -5, -4, -19, -9,…
$ carrier        &lt;chr&gt; "B6", "EV", "EV", "EV", "MQ", "EV", "AA", "MQ", "EV", "…
$ flight         &lt;int&gt; 181, 4633, 4462, 4555, 4255, 4621, 177, 4490, 3810, 9, …
$ tailnum        &lt;chr&gt; "N527JB", "N14974", "N11176", "N14148", "N645MQ", "N145…
$ origin         &lt;chr&gt; "JFK", "EWR", "LGA", "LGA", "JFK", "EWR", "JFK", "LGA",…
$ dest           &lt;chr&gt; "SAN", "BTV", "CLE", "CLE", "BNA", "CVG", "SFO", "CMH",…
$ air_time       &lt;dbl&gt; 312, 47, 62, 73, 108, 92, 352, 80, 109, 135, 190, 138, …
$ distance       &lt;dbl&gt; 2446, 266, 419, 419, 765, 569, 2586, 479, 708, 944, 159…
$ hour           &lt;dbl&gt; 8, 11, 19, 6, 17, 17, 17, 8, 10, 17, 7, 6, 7, 11, 15, 8…
$ minute         &lt;dbl&gt; 20, 10, 59, 10, 0, 29, 45, 15, 0, 36, 10, 59, 7, 15, 5,…
$ time_hour      &lt;dttm&gt; 2013-01-04 08:00:00, 2013-12-05 11:00:00, 2013-08-19 1…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(flights)<span class="co"># know the columns name of your dataset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "year"           "month"          "day"            "dep_time"      
 [5] "sched_dep_time" "dep_delay"      "arr_time"       "sched_arr_time"
 [9] "arr_delay"      "carrier"        "flight"         "tailnum"       
[13] "origin"         "dest"           "air_time"       "distance"      
[17] "hour"           "minute"         "time_hour"     </code></pre>
</div>
</div>
</section>
<section id="data-types" class="level3">
<h3 class="anchored" data-anchor-id="data-types">Data types</h3>
<p>Only the most used ones are covered below:</p>
<ul>
<li><p><em>int</em> stands for integers (1,2,3).</p></li>
<li><p><em>dbl</em> stands for doubles, or real numbers (-1, 1.5,4/5).</p></li>
<li><p><em>chr</em> stands for character vectors, or strings (“this is a string”).</p></li>
<li><p><em>fctr</em> stands for factors, which R uses to represent categorical variables with fixed possible values (freshman, sophomore, junior, senior).</p></li>
<li><p><em>lgl</em> stands for logical, vectors that contain only TRUE or FALSE (True, False, True).</p></li>
<li><p><em>date</em> stands for dates (01/18/2021).</p></li>
<li><p><em>dttm</em> stands for date-times, a date + a time (01/18/2021 11:00 am).</p></li>
</ul>
</section>
<section id="data-structures" class="level3">
<h3 class="anchored" data-anchor-id="data-structures">Data structures</h3>
<p>Only the most used ones are covered below:</p>
<ul>
<li><em>Vector</em>: An atomic vector (or simply vector) is the simplest data structure in R which consists of an ordered set of values of the same type (e.g.&nbsp;numeric, character, date, etc…).</li>
</ul>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">Examples:</h4>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>departments <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"OMIS"</span>, <span class="st">"Finance"</span>, <span class="st">"Accounting"</span> , <span class="st">"Management"</span>,<span class="st">"Marketing"</span>)<span class="co"># a vector can be created using the combine function c()</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#departments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>students_number <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">220</span>, <span class="dv">180</span>, <span class="dv">255</span>, <span class="dv">100</span>, <span class="dv">170</span>)<span class="co">#all the elements of a vector must have the same data type. This is why the data type determines the type of vector you have (e.g., numeric, characters, date vectors).</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#students_number</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>students_avg_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">21.5</span>, <span class="fl">22.1</span>, <span class="fl">21.8</span>, <span class="fl">21.3</span>, <span class="fl">21.5</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#students_avg_age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><em>Dataframe/tibble/dataset</em>: A dataframe is a data structure that organizes data into a 2-dimensional table of rows and columns, much like a spreadsheet. Dataframes are called tibbles in R (tidyverse).</li>
</ul>
<p>We can create a tibble by combining two or more vectors of the same length.</p>
</section>
<section id="example" class="level4">
<h4 class="anchored" data-anchor-id="example">Example:</h4>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cob <span class="ot">&lt;-</span> <span class="fu">tibble</span>(departments,students_number,students_avg_age)<span class="co"># each vector was of 5 elements (or length 5) --&gt; this is why the cob dataframe has 5 rows. We are using three vectors in our cob dataframe --&gt; this is why we have 3 columns or variables. As you can see the vector name has become the column name and a tibble is not much different than an Excel spreadsheet</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#cob</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>NOTE</em>: there are other data structures available in R (e.g., matrices, lists etc.) but we will not use or cover them in this course.</p>
<p>Now that you have a basic understanding of data types and structures (we will cover more about tibble next week) we can dive into useful functions for wrangling your data.</p>
</section>
</section>
<section id="key-data-manipulation-dplyr-package-functions" class="level3">
<h3 class="anchored" data-anchor-id="key-data-manipulation-dplyr-package-functions">5 + 1 Key data manipulation (dplyr package) functions:</h3>
<ul>
<li><p>Pick observations based on their values (<em>filter()</em>).</p></li>
<li><p>Reorder the rows/columns (<em>arrange()</em>).</p></li>
<li><p>Pick variables based their column names (<em>select()</em>).</p></li>
<li><p>Create new variables or update existing variables (<em>mutate()</em>).</p></li>
<li><p>Collapse many values down to a single summary (<em>summarise()</em>).</p></li>
<li><p>All the above functions can be used in conjunction with the function <em>group_by()</em> (our +1 function). group_by changes the scope of each function from operating on the entire dataset to operating on it group-by-group.</p></li>
</ul>
<section id="how-they-work" class="level4">
<h4 class="anchored" data-anchor-id="how-they-work">How they work?</h4>
<p>These six functions provide the verbs for a language of data manipulation. All verbs work similarly, and this is a great news, and have a similar structure:</p>
<p>The first argument is a dataframe on which you want to perform a manipulation.</p>
<p>The subsequent arguments describe what do you want to do with the original dataframe, using the variable names (without quotes).</p>
<p>The result is a new dataframe (remember to assign it to a new object if you want to preserve the changes). Together these properties make it easy to chain together multiple simple steps to achieve a complex result.</p>
</section>
</section>
</section>
<section id="filter" class="level2">
<h2 class="anchored" data-anchor-id="filter">Filter()</h2>
<p><strong>filter()</strong> is used to include in your dataset only observations that meet one or more logical conditions. For example, you will use filter if from an imaginary US tax payers dataset (tax_payers), you want to continue your analysis only on tax payers that live in Illinois given a states variable (notice that by doing so # of observations/rows decreases while # of variables/columns stays the same). –&gt; <strong>filter(tax_payers, state== “IL”)</strong></p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Example: flights that traveled on January (Note the # of observation included in the dataset)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="co">#the results do not replace the original dataset. To save it to future analysis assign it to a new variable named jan_flights. Create the variable jan_flights </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a> <span class="co">#&lt;- </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print jan_flights</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Example 2: flights that traveled to Ohare (ORD)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:7:0: unexpected end of input
5: #Example 2: flights that traveled to Ohare (ORD)
6: 
  ^</code></pre>
</div>
</div>
<p>To use filtering effectively, you have to know how to select the observations that you want using the comparison operators. R provides the standard suite: &gt;, &gt;=, &lt;, &lt;=, != (not equal), and == (equal).</p>
<p>When you’re starting out with R, the easiest mistake to make is to use = instead of == when testing for equality. When this happens you’ll get an informative error:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights, <span class="at">month =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `filter()`:
! We detected a named input.
ℹ This usually means that you've used `=` instead of `==`.
ℹ Did you mean `month == 1`?</code></pre>
</div>
</div>
<p>Multiple arguments to filter() are combined with “and”: every expression must be true in order for a row to be included in the output. For other types of combinations, you’ll need to use Boolean operators yourself: &amp; is “and”, | is “or”, and ! is “not”. The “,” can also be used instead of &amp;. However, I do recommend to use &amp; especially at the beginning as it is easier for you to remind that both conditions must be met for an observation to be included in the analysis. However, if you combine an “&amp;” and “|” in the same filter you need parenthesis to separate the “&amp;” and the “|” (see below note).</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Example 3: find flights in November and December</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="co"># look at the results. Does it make sense to have such filter?</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Example 4: find flights in November or December</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="co"># Now this makes sense as you want to constraint the focus of your analysis to the last two months of the year. You might have an intuition that during the holiday season there is need for more flights/personnel </span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 5: find flights that weren’t delayed (on arrival or departure) by more than two hours </span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(<span class="co"># Hours are presented in minutes in the dataset that's why 120. Again, you need to get to know your data before starting manipulations. If you don't remember column names check the colnames function (?colnames).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:10:0: unexpected end of input
8: filter(# Hours are presented in minutes in the dataset that's why 120. Again, you need to get to know your data before starting manipulations. If you don't remember column names check the coln
9: 
  ^</code></pre>
</div>
</div>
<section id="activity-1-filter" class="level3">
<h3 class="anchored" data-anchor-id="activity-1-filter">Activity 1: Filter</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights in january with more than 60 minutes delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights with departure or arrival delay smaller than 15 minutes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights with distance equal or bigger than 1010 miles</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights operated by american airlines (AA)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="note" class="level4">
<h4 class="anchored" data-anchor-id="note">NOTE</h4>
<p>Be careful in using &amp; and , as substitutes. In some cases they are but in other not. For example if you are looking for the flights in January with more than 60 minutes delay both in departure and arrival</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights, month<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> dep_delay<span class="sc">&gt;</span> <span class="dv">60</span> <span class="sc">&amp;</span> arr_delay<span class="sc">&gt;</span><span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 80 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1    31     2029           1900        89     2151           2018
 2  2013     1    31     2051           1750       181     2217           1908
 3  2013     1    30     2322           2000       202      129           2224
 4  2013     1     2     2148           2004       104     2234           2112
 5  2013     1    25     2051           1910       101        8           2215
 6  2013     1    31     2130           2000        90     2235           2114
 7  2013     1    23      836            655       101     1049            927
 8  2013     1    23     1949           1745       124     2226           2020
 9  2013     1     4     1430           1240       110     1717           1540
10  2013     1    16     1741           1530       131     1933           1711
# ℹ 70 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p>this line is equivalent to the one below with ,.</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights, month<span class="sc">==</span><span class="dv">1</span> , dep_delay<span class="sc">&gt;</span> <span class="dv">60</span> , arr_delay<span class="sc">&gt;</span><span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 80 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1    31     2029           1900        89     2151           2018
 2  2013     1    31     2051           1750       181     2217           1908
 3  2013     1    30     2322           2000       202      129           2224
 4  2013     1     2     2148           2004       104     2234           2112
 5  2013     1    25     2051           1910       101        8           2215
 6  2013     1    31     2130           2000        90     2235           2114
 7  2013     1    23      836            655       101     1049            927
 8  2013     1    23     1949           1745       124     2226           2020
 9  2013     1     4     1430           1240       110     1717           1540
10  2013     1    16     1741           1530       131     1933           1711
# ℹ 70 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p>In this case &amp; and , are perfect substitutes but it is not always the case. Let’s check the example below:</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights, month<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> dep_delay<span class="sc">&gt;</span> <span class="dv">60</span> <span class="sc">|</span>arr_delay<span class="sc">&gt;</span><span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,278 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013    12     5     1238           1110        88     1342           1223
 2  2013    12    18     1704           1509       115     1933           1742
 3  2013     9    20     1506           1345        81     1635           1523
 4  2013     5    20     1105           1003        62     1314           1212
 5  2013     7     7      721            600        81      822            715
 6  2013     5     3     1413           1200       133     1554           1338
 7  2013     7    27     1432           1315        77     1614           1505
 8  2013     1    31     1934           1855        39     2333           2210
 9  2013    12    27     2315           2219        56      408            304
10  2013     7     2     2034           1930        64        5           2248
# ℹ 1,268 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights, month<span class="sc">==</span><span class="dv">1</span> , dep_delay<span class="sc">&gt;</span> <span class="dv">60</span> <span class="sc">|</span>arr_delay<span class="sc">&gt;</span><span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1    31     1934           1855        39     2333           2210
 2  2013     1    31     2029           1900        89     2151           2018
 3  2013     1    31     2051           1750       181     2217           1908
 4  2013     1    31     1040           1000        40     1419           1310
 5  2013     1    30     2322           2000       202      129           2224
 6  2013     1     2     2148           2004       104     2234           2112
 7  2013     1    25     2051           1910       101        8           2215
 8  2013     1    31     2130           2000        90     2235           2114
 9  2013     1    23      836            655       101     1049            927
10  2013     1    23     1949           1745       124     2226           2020
# ℹ 90 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p>In fact, the | is affecting the equivalency with the ,. So, if in your filter you have both a &amp; and |, the &amp; and the , are not equivalent.</p>
<p>To achieve equality in this case, you need parenthesis to divide the &amp; and | conditions.</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights, month<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> (dep_delay<span class="sc">&gt;</span> <span class="dv">60</span> <span class="sc">|</span>arr_delay<span class="sc">&gt;</span><span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1    31     1934           1855        39     2333           2210
 2  2013     1    31     2029           1900        89     2151           2018
 3  2013     1    31     2051           1750       181     2217           1908
 4  2013     1    31     1040           1000        40     1419           1310
 5  2013     1    30     2322           2000       202      129           2224
 6  2013     1     2     2148           2004       104     2234           2112
 7  2013     1    25     2051           1910       101        8           2215
 8  2013     1    31     2130           2000        90     2235           2114
 9  2013     1    23      836            655       101     1049            927
10  2013     1    23     1949           1745       124     2226           2020
# ℹ 90 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<p>Without the parenthesis you will get different &amp; wrong results as above. So, please be careful and keep this in mind.</p>
</section>
</section>
</section>
<section id="arrange" class="level2">
<h2 class="anchored" data-anchor-id="arrange">Arrange()</h2>
<p><strong>arrange()</strong> works similarly to filter() except that instead of selecting rows, it changes the order in which they are presented in the dataset. For example, using the above US tax payers dataset, you will use arrange if you want to sort the dataset by the tax payers last name in decreasing order (Z-A). –&gt; <strong>arrange(tax_payers, desc(last_name))</strong> Arrange takes a dataframe and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(flights, year, month, day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1     1044           1041         3     1339           1350
 2  2013     1     1     1730           1730         0     2013           1959
 3  2013     1     1      723            725        -2     1013           1017
 4  2013     1     1      732            729         3     1041           1039
 5  2013     1     1      752            759        -7      955            959
 6  2013     1     1     1240           1229        11     1451           1428
 7  2013     1     1      600            600         0      851            858
 8  2013     1     1     1744           1720        24     2052           2025
 9  2013     1     1     1653           1700        -7     2005           2018
10  2013     1     1     1649           1639        10     1937           1911
# ℹ 14,990 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#arrange(flights, desc(dep_delay))#desc allows to re-order by a column in descending order</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 1: arrange the dataset based on destination increasing alphabetical order</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Example 2: arrange the dataset based on distance decreasing order</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="activity-2-arrange" class="level3">
<h3 class="anchored" data-anchor-id="activity-2-arrange">Activity 2: Arrange</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights by distance from smaller to bigger</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights by air time</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights with distance equal or bigger than 1010 miles</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#flights by arr_delay from bigger to smaller</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="select" class="level2">
<h2 class="anchored" data-anchor-id="select">Select()</h2>
<p><strong>select()</strong> allows you to continue the analysis only on some specific columns of your original dataset. By using select you can rapidly zoom in on a useful subset of variables that you think needs deeper investigation or that are part of the scope of your analysis. For example, using the same imaginary US tax payer dataset, you want to focus your analysis on just salary, gender and age. It is unnecessary to keep all the other columns as you already know that they are not going to be included in the scope of the analysis –&gt; <strong>select(tax_payers, salary, gender, age)</strong></p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(flights, year, month, day)<span class="co">#Select columns by name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 3
    year month   day
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1  2013     1     4
 2  2013    12     5
 3  2013     8    19
 4  2013     4    14
 5  2013     4    29
 6  2013     4     5
 7  2013     1    17
 8  2013     2    26
 9  2013     2    20
10  2013     3    22
# ℹ 14,990 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(flights, year<span class="sc">:</span>day)<span class="co">#Select all columns between year and day (inclusive)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 3
    year month   day
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1  2013     1     4
 2  2013    12     5
 3  2013     8    19
 4  2013     4    14
 5  2013     4    29
 6  2013     4     5
 7  2013     1    17
 8  2013     2    26
 9  2013     2    20
10  2013     3    22
# ℹ 14,990 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)<span class="co">#Select columns based on their position in the dataset (inclusive)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 3
    year month   day
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1  2013     1     4
 2  2013    12     5
 3  2013     8    19
 4  2013     4    14
 5  2013     4    29
 6  2013     4     5
 7  2013     1    17
 8  2013     2    26
 9  2013     2    20
10  2013     3    22
# ℹ 14,990 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="sc">-</span>(year<span class="sc">:</span>day))<span class="co"># Select all columns except those from year to day (inclusive)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 16
   dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier
      &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
 1      819            820        -1     1103           1129       -26 B6     
 2     1238           1110        88     1342           1223        79 EV     
 3     1953           1959        -6     2141           2146        -5 EV     
 4      608            610        -2      752            754        -2 EV     
 5     1653           1700        -7     1815           1835       -20 MQ     
 6     1813           1729        44     2026           1937        49 EV     
 7     1740           1745        -5     2054           2120       -26 AA     
 8      834            815        19     1031           1010        21 MQ     
 9     1014           1000        14     1219           1221        -2 EV     
10     1741           1736         5     2024           2029        -5 B6     
# ℹ 14,990 more rows
# ℹ 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
#   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 1: select the 2nd, 4th and 10th columns </span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Example 2: select all the columns but the last 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you can see there are multiple ways to select the same columns (first 3 lines of code give the same outcome: year, month , day subset), but not all of them have the same efficiency. Imagine selecting the first 15 column using the first line of code (you will have to manually type 15 columns name) compared to using the second line (first column : fifteenth column) or the third (1:15). However, when you use the last two methods I recommend to check the column order using the function <em>colnames()</em></p>
<p>Moreover, there are a number of helper functions you can use within select():</p>
<p><em>starts_with(“abc”)</em>: matches names that begin with “abc”.</p>
<p><em>ends_with(“xyz”)</em>: matches names that end with “xyz”.</p>
<p><em>contains(“ijk”)</em>: matches names that contain “ijk”.</p>
<p>See ?select for more details.</p>
<section id="activity-3-select" class="level3">
<h3 class="anchored" data-anchor-id="activity-3-select">Activity 3: Select</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#first 10 adjacent columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">#columns that contain the word "time"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#all columns but those that contain the word "time"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#columns that start with the letter "d"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="mutate" class="level2">
<h2 class="anchored" data-anchor-id="mutate">Mutate()</h2>
<p><strong>mutate()</strong> enables you to change the columns available in your original dataset. By using mutate() you can add new columns that are functions of existing columns. For example, in the tax_payers dataset, you note that the salary column is reported in euros rather than dollars. In this case, you want to create a new column that reports salary in euros. To do so you need to multiple the value that are in the original salary by the conversion rate between euros and dollars. –&gt; <strong>mutate(tax_payers, salary_USD = salary * 1.21)</strong>. Note how I chose a meaningful name for the new column, and that the conversion rate at the time I created this rmd file was 1.21.</p>
<p>Moreover, keep in mind that mutate() always adds new columns at the end of your dataset. So, to view the new column you can use <strong>View(tax_payers)</strong> or <strong>select(tax_payers, salary_USD)</strong>. Nonetheless, If you want to just use the new compute column you can also use the <strong>transmute()</strong> function (see example below).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>flights_sml <span class="ot">&lt;-</span> <span class="fu">select</span>(flights, </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  year<span class="sc">:</span>day, </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ends_with</span>(<span class="st">"delay"</span>), </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  distance, </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  air_time</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>)<span class="co"># what is the purpose of running this?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 1: using the flights_sml dataset compute a column named gain equal to the difference between departure delay and arrival delay</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 2: using the flights_sml dataset compute a column named gain equal to the difference between departure delay and arrival delay; a column named hours equal to air time dived by 60; and a column named gain_per_hour equal to gain divided by hours.</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>( <span class="co"># you can refer to column your are just creating, be careful to the order. Can you invert the order of gain_per_hour and gain. Let's try!</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 3: using the flights_sml dataset  compute a column named speed equal to the variable distance divided by air time multiplied by 60 (we want speed in mph). Use transmute instead of mutate. What is the difference?</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="fu">transmute</span>(<span class="co">#If you only want to keep the new variables, use transmute()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:10:0: unexpected end of input
8: transmute(#If you only want to keep the new variables, use transmute()
9: 
  ^</code></pre>
</div>
</div>
<section id="activity-4-mutate" class="level3">
<h3 class="anchored" data-anchor-id="activity-4-mutate">Activity 4: Mutate</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute a variable that shows the difference between scheduled departure time and the actual time of departure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute a variable that shows the air time divided by the total flight distance</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute a variable that shows the difference between scheduled arrival time and the actual time of arrival</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="do">##compute a variable that shows the sum of the departure delay and the air time</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="summarise" class="level2">
<h2 class="anchored" data-anchor-id="summarise">Summarise()</h2>
<p><strong>summarise()</strong> enables you to compute descriptive statistics of your dataset. summarise() collapses a dataframe to a single row. For example, if you want to compute the average salary of the observation of the tax payers in your dataset, summarise will return to you one row that contains the average value. –&gt; <strong>summarise(tax_payers, avg_salary = mean(salary))</strong>. Note how I chose a meaningful name for the output of my summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(flights, <span class="at">avg_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))<span class="co"># we will talk later about NAs (missing values) but the na.rm=TRUE argument is critical if the column you are using for your average contains missing values. Let's remove that argument amd see what happens.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  avg_delay
      &lt;dbl&gt;
1      13.1</code></pre>
</div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 1: compute the mean of the arrival delay column</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 2: find the max distance</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>summarise() is not terribly useful unless we pair it with <strong>group_by()</strong> or better it is pretty limited to summarise a single value per column. For example, imagine that you want to see how the average salary of tax payers change depending on their age. In this case, you need to first group_by your dataset using the age column and then compute the average salary. Thanks to the combination of group_by and summarise you will able to explore if the average salary of a 40 years old tax payer is on average higher/lower or equal to the ones of a 21 years old tax payer.</p>
</section>
<section id="summarise-group_by" class="level2">
<h2 class="anchored" data-anchor-id="summarise-group_by">Summarise + group_by()</h2>
<p>So, when you use the group_by() function you can change the unit of analysis from the complete dataset to individual groups (columns that caught your attention). group_by will create a group for each unique value available in the selected column.Then, when you use the dplyr verbs on a grouped dataframe they’ll be automatically applied “by group”. For example, if we applied exactly the same code to a dataframe grouped by date, we get the average delay per date:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>by_day <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights, year, month, day)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(by_day, <span class="at">avg_delay_date =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))<span class="co">#help in answer the question about how dates are affecting the delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 4
# Groups:   year, month [12]
    year month   day avg_delay_date
   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;dbl&gt;
 1  2013     1     1         16.7  
 2  2013     1     2          6.53 
 3  2013     1     3         16.4  
 4  2013     1     4         22.5  
 5  2013     1     5          1.15 
 6  2013     1     6          4.42 
 7  2013     1     7          4.75 
 8  2013     1     8          3.49 
 9  2013     1     9          0.432
10  2013     1    10          0.396
# ℹ 355 more rows</code></pre>
</div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Example 1: do the same analysis for each airlines. Call the column avg_dalay_carrier.</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>by_carrier</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="co">#help in answer the question about how the airlines are affecting the delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:4:0: unexpected end of input
2: by_carrier
3: summarise(#help in answer the question about how the airlines are affecting the delay
  ^</code></pre>
</div>
</div>
<p>Together group_by() and summarise() provide one of the tools that you’ll use most commonly when working with dplyr: grouped summaries. These two functions are extremely useful to create descriptives statistics of the column of your dataset.</p>
<section id="activity-5-summarise" class="level3">
<h3 class="anchored" data-anchor-id="activity-5-summarise">Activity 5: Summarise</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute the max dep_delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute the min air_time</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute mean and standard deviation of the distance per each destination</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute the max and min of air_time per each month</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-inside-r" class="level3">
<h3 class="anchored" data-anchor-id="data-inside-r">Data Inside R</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Running this code is the equivalent of simply running the name of the dataset you want to print. Meaning default printing will be applied</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>flights<span class="co"># but what if I want to print in console all columns?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,000 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     4      819            820        -1     1103           1129
 2  2013    12     5     1238           1110        88     1342           1223
 3  2013     8    19     1953           1959        -6     2141           2146
 4  2013     4    14      608            610        -2      752            754
 5  2013     4    29     1653           1700        -7     1815           1835
 6  2013     4     5     1813           1729        44     2026           1937
 7  2013     1    17     1740           1745        -5     2054           2120
 8  2013     2    26      834            815        19     1031           1010
 9  2013     2    20     1014           1000        14     1219           1221
10  2013     3    22     1741           1736         5     2024           2029
# ℹ 14,990 more rows
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>?flights<span class="co">#get info about the dataset</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(flights)<span class="co">#get the columns in the dataset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "year"           "month"          "day"            "dep_time"      
 [5] "sched_dep_time" "dep_delay"      "arr_time"       "sched_arr_time"
 [9] "arr_delay"      "carrier"        "flight"         "tailnum"       
[13] "origin"         "dest"           "air_time"       "distance"      
[17] "hour"           "minute"         "time_hour"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flights)<span class="co">#useful way to collapse the content in a summary format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 15,000
Columns: 19
$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
$ month          &lt;int&gt; 1, 12, 8, 4, 4, 4, 1, 2, 2, 3, 1, 2, 12, 8, 7, 9, 9, 12…
$ day            &lt;int&gt; 4, 5, 19, 14, 29, 5, 17, 26, 20, 22, 25, 18, 13, 5, 29,…
$ dep_time       &lt;int&gt; 819, 1238, 1953, 608, 1653, 1813, 1740, 834, 1014, 1741…
$ sched_dep_time &lt;int&gt; 820, 1110, 1959, 610, 1700, 1729, 1745, 815, 1000, 1736…
$ dep_delay      &lt;dbl&gt; -1, 88, -6, -2, -7, 44, -5, 19, 14, 5, 4, -2, -5, -7, 1…
$ arr_time       &lt;int&gt; 1103, 1342, 2141, 752, 1815, 2026, 2054, 1031, 1219, 20…
$ sched_arr_time &lt;int&gt; 1129, 1223, 2146, 754, 1835, 1937, 2120, 1010, 1221, 20…
$ arr_delay      &lt;dbl&gt; -26, 79, -5, -2, -20, 49, -26, 21, -2, -5, -4, -19, -9,…
$ carrier        &lt;chr&gt; "B6", "EV", "EV", "EV", "MQ", "EV", "AA", "MQ", "EV", "…
$ flight         &lt;int&gt; 181, 4633, 4462, 4555, 4255, 4621, 177, 4490, 3810, 9, …
$ tailnum        &lt;chr&gt; "N527JB", "N14974", "N11176", "N14148", "N645MQ", "N145…
$ origin         &lt;chr&gt; "JFK", "EWR", "LGA", "LGA", "JFK", "EWR", "JFK", "LGA",…
$ dest           &lt;chr&gt; "SAN", "BTV", "CLE", "CLE", "BNA", "CVG", "SFO", "CMH",…
$ air_time       &lt;dbl&gt; 312, 47, 62, 73, 108, 92, 352, 80, 109, 135, 190, 138, …
$ distance       &lt;dbl&gt; 2446, 266, 419, 419, 765, 569, 2586, 479, 708, 944, 159…
$ hour           &lt;dbl&gt; 8, 11, 19, 6, 17, 17, 17, 8, 10, 17, 7, 6, 7, 11, 15, 8…
$ minute         &lt;dbl&gt; 20, 10, 59, 10, 0, 29, 45, 15, 0, 36, 10, 59, 7, 15, 5,…
$ time_hour      &lt;dttm&gt; 2013-01-04 08:00:00, 2013-12-05 11:00:00, 2013-08-19 1…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">view</span>()<span class="co"># the other option to print more rows and actually all rows is still the view () function discussed in week 1 to open the dataset in a new window</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># " |&gt; " # is the pipe operator and it is used to combine functions and apply them to variables within the tidyverse package. The shortcut for the pipe operator is cmd/ctrl + shift+ M. More of its application later in the class.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-data" class="level3">
<h3 class="anchored" data-anchor-id="importing-data">Importing data</h3>
<p>But what happen when your data come from outside of R? It is time to learn how to import external data. To load flat files in R we will use the readr package, which is part of the core tidyverse package. Most of readr’s functions are concerned with turning flat files into dataframes (e.g, csv files but similar functions exist also for Excel files or other delimited files). These functions all have similar syntax: once you’ve mastered one, you can use the others with ease. In this course we’ll focus on read_csv(). Not only are csv files one of the most common forms of data storage, but once you understand read_csv(), you can easily apply your knowledge to all the other functions in readr.</p>
<p>The first argument to read_csv() is the most important: it’s the path to the file to read. Once again if your file is in your project folder, you will not have any troubles to access it:</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"heights.csv"</span>)<span class="co">#When you run read_csv() it prints out a column specification that gives the name and type of each column. #the heights.csv is available for download on Blackboard in the week 3 module. If this code doesn't work, make sure to move the file in your project folder.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: 'heights.csv' does not exist in current working directory ('C:/Users/venka/OneDrive - Northern Illinois University/Desktop/Vineel/Vineel/TA work/Fall_2024/Code Base/omis482-f2024-class-website').</code></pre>
</div>
</div>
<section id="note-1" class="level4">
<h4 class="anchored" data-anchor-id="note-1">NOTE</h4>
<p>read_csv() uses the first line of the data for the column names, which is a very common convention. The data might not have column names. You can use col_names = FALSE to tell read_csv() not to treat the first row as headings, and instead label them sequentially from X1 to Xn. The function will guess the data type of each column by looking at the first 1000 rows. It is your responsibility to make sure that the columns type are correct. For more info look the parsing sections 11.3 and 11.4. To get other types of data into R, I recommend starting with the tidyverse packages listed below:</p>
<ul>
<li><p>haven package: reads SPSS, Stata, and SAS files.</p></li>
<li><p>readxl package: reads excel files (both .xls and .xlsx).</p></li>
<li><p>DBI package: along with a database specific backend (e.g.&nbsp;RMySQL, RSQLite, RPostgreSQL etc) allows you to run SQL queries against a database and return a data frame.</p></li>
</ul>
</section>
</section>
<section id="writing-data" class="level3">
<h3 class="anchored" data-anchor-id="writing-data">Writing data</h3>
<p>Now that we have seen how to bring data into RStudio, what about exporting data from RStudio? The readr package comes also with two useful functions for writing data back to disk: write_csv() and write_tsv(). If you want to export a csv file to Excel, use write_excel_csv(). The most important arguments are x (the data frame to save), and path (the location to save it).</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(nycflights13<span class="sc">::</span>flights, <span class="st">"flights.csv"</span>)<span class="co">#I am exporting the flights dataset and writing it into a csv file called flights.csv. After running the code that file will be available in your working directory (which should be your project folder)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="pipes" class="level2">
<h2 class="anchored" data-anchor-id="pipes">Pipes</h2>
<p>You probably have seen the pipe symbol before but let’s learn how it works and why it is so important in tidyverse. Before we do that please keep in mind that two types of pipes exist:</p>
<ul>
<li>The magrittr pipe %&gt;% that comes from the magrittr package created by Stefan Milton Bache. Packages in the tidyverse load %&gt;% for you automatically, so you don’t usually load magrittr explicitly. While magrittr pipe was used for a while in the tidyverse world, it is now losing its traction.</li>
<li>In fact, the native pipe |&gt; is becoming more popular and it is most commonly used.</li>
</ul>
<p>For this course we will use only the native pipe |&gt;. While for simple cases, |&gt; and %&gt;% behave identically only the native pipe is part of base R, and so it’s always available for you to use, even when you’re not loading the tidyverse. Moreover, |&gt; is simpler than %&gt;% and it works better with more advanced tasks.</p>
<p>However, you might need to make one change to your RStudio options to use |&gt; instead of %&gt;% by accessing the Code Editing tab of your Project Option; After you made this change you can add the native pipe to your code by using the built-in keyboard shortcut Ctrl/Cmd + Shift + M.</p>
<section id="combining-multiple-operations-with-the-pipe" class="level3">
<h3 class="anchored" data-anchor-id="combining-multiple-operations-with-the-pipe">Combining multiple operations with the pipe</h3>
<p>Imagine that we want to explore the relationship between the distance and average delay for each destination. There are three steps to prepare our original flights data:</p>
<ul>
<li><p>Group flights by destination.</p></li>
<li><p>Summarise to compute average distance, average delay, and number of flights.</p></li>
<li><p>Filter to remove noisy points (less than 20 observations, small sample) and Honolulu airport (almost twice as far away as the next closest airport).</p></li>
</ul>
<p>If we put in practice what we learned so far, this code is a little frustrating to write because we have to give each intermediate data frame a name, even though we don’t care about it. Naming things is hard, so this slows down our analysis.</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>by_dest <span class="ot">&lt;-</span> <span class="fu">group_by</span>(flights, dest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>delay <span class="ot">&lt;-</span> <span class="fu">summarise</span>(by_dest,</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">avg_dist =</span> <span class="fu">mean</span>(distance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">avg_delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>)<span class="co">#know how many flights go to each destination [n()]; average distance and average delay for flights at each destination</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>delay_filtered <span class="ot">&lt;-</span> <span class="fu">filter</span>(delay, count <span class="sc">&gt;</span> <span class="dv">20</span>, dest <span class="sc">!=</span> <span class="st">"HNL"</span>)<span class="co">#now let's remove all destinations that have less or equal to 20 flights and let's exclude Honululu from it. Notice how many assignment I need to create the desired object (3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There’s another, much simpler and efficient, way to tackle the same problem thanks to the pipe operator, |&gt;, because we can combine manipulations together:</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>filtered_delay <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest) <span class="sc">|&gt;</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_dist =</span> <span class="fu">mean</span>(distance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">20</span>, dest <span class="sc">!=</span> <span class="st">"HNL"</span>) <span class="co">#Notice how many assignment I need to create the desired object (1), two less than the previous code.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Anyway, what is great about using pipe is that your code now focuses on the transformations, and not anymore on what’s being transformed, which makes the code easier to read. In fact, the best way to read the above code is to take each line before the pipe as an imperative statement (remember that the dataset us always the starting point). - Take the flights dataset, then - Group it by destination, then - summarise it (I want the number of flights at each destination, the average distance and the average delay of each destination), then - Filter the results and include only those destinations with more than 20 flights and exclude Honululu.</p>
<p>As suggested by this reading, a good way to pronounce |&gt; when reading code is “then”. So, remember that you can use the pipe to rewrite multiple operations in a way that you can read left-to-right, top-to-bottom. We’ll use piping from now on because it considerably improves the readability of code and it makes your code more efficient. Working with the pipe is one of the key criteria for belonging to the tidyverse world!</p>
<p>By the way we can use the pipe also to what we have already learned ;-)</p>
</section>
<section id="activity-6-basic-pipes" class="level3">
<h3 class="anchored" data-anchor-id="activity-6-basic-pipes">Activity 6: Basic pipes</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only the flights in February with more than 75 minutes delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort the flights by air_time from bigger to smaller</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep all columns but those that contain the word "dep"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute a column named gain equal to the difference between departure delay and arrival delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="missing-values" class="level3">
<h3 class="anchored" data-anchor-id="missing-values">Missing values</h3>
<p>Ok now it is time to provide an explanation on the <strong>na.rm</strong> argument that we used in the summarise function. Let’s try one more time in not using it. What happens if we don’t have it?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(dep_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 4
# Groups:   year, month [12]
    year month   day   mean
   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
 1  2013     1     1 16.7  
 2  2013     1     2 NA    
 3  2013     1     3 16.4  
 4  2013     1     4 22.5  
 5  2013     1     5  1.15 
 6  2013     1     6  4.42 
 7  2013     1     7  4.75 
 8  2013     1     8  3.49 
 9  2013     1     9  0.432
10  2013     1    10 NA    
# ℹ 355 more rows</code></pre>
</div>
</div>
<p>We get a lot of missing values! That’s because aggregation functions obey the usual rule of missing values: if there’s any missing value in the input, the output will be a missing value. Fortunately, all aggregation functions have an na.rm argument which removes the missing values prior to computation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 4
# Groups:   year, month [12]
    year month   day   mean
   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
 1  2013     1     1 16.7  
 2  2013     1     2  6.53 
 3  2013     1     3 16.4  
 4  2013     1     4 22.5  
 5  2013     1     5  1.15 
 6  2013     1     6  4.42 
 7  2013     1     7  4.75 
 8  2013     1     8  3.49 
 9  2013     1     9  0.432
10  2013     1    10  0.396
# ℹ 355 more rows</code></pre>
</div>
</div>
<p>In this case, missing values represent cancelled flights. So, we could also tackle the problem by first removing all the cancelled flights. By doing so we get rid of all missing values and so of the need of using the na.rm argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay), <span class="sc">!</span><span class="fu">is.na</span>(arr_delay))<span class="co">#save this dataset so we can reuse it in the future.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(dep_delay))<span class="co">#no need of na.rm since we don't have NAs anymore</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 4
# Groups:   year, month [12]
    year month   day   mean
   &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
 1  2013     1     1 16.7  
 2  2013     1     2  6.53 
 3  2013     1     3 16.4  
 4  2013     1     4 22.5  
 5  2013     1     5  1.15 
 6  2013     1     6  4.42 
 7  2013     1     7  4.75 
 8  2013     1     8  3.49 
 9  2013     1     9  0.432
10  2013     1    10  0.396
# ℹ 355 more rows</code></pre>
</div>
</div>
</section>
<section id="why-producing-counts-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-producing-counts-matters">Why producing counts matters?</h3>
<p>We have already seen how to count observations. However, it is extremely important that you keep in mind that whenever you do any aggregation, it’s always a good idea to include either a count (n()), or a count of non-missing values (sum(!is.na(x))). That way you can check that you’re not drawing conclusions based on very small amounts of data. Results and conclusions based on few observations contain noise and are drawn based on a small number of events and can lead to incorrect insights.</p>
<p><em>Imaginary Scenario</em>: Let’s talk about flight delays and why we can’t always compare them from different times like before, during, and after the pandemic. Things change, and comparisons might not be fair.</p>
<p>Imagine a new direct flight from DeKalb to Potenza. On its first trip, something rare happens: a passenger gets sick, and because of a new rule, the flight is delayed for 14 hours while they wait for a health check.</p>
<p>If we only look at this one flight, we might think the average delay for this route is 14 hours. But that’s not true, it’s just one unusual case. We can’t say all flights on this route are always delayed like this based on one incident. We need more flights to make a fair judgment. If after many flights the delay is still long, then we might think it’s a bad route. But for now, it’s too early to decide based on just one flight.</p>
<p>I hope the scenario made the point on the importance of count clear. Now let’s use a real data example and let’s look at the planes (identified by their tail number) that have the highest average delays:</p>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tailnum) <span class="sc">|&gt;</span> </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(dep_delay))<span class="co"># no info about how many flights each tailnum has made. Which one seem the most problematic? </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,088 × 2
   tailnum delay
   &lt;chr&gt;   &lt;dbl&gt;
 1 N0EGMQ   3.81
 2 N10156  54   
 3 N102UW  -1   
 4 N103US   0   
 5 N104UW  28.7 
 6 N10575  30   
 7 N105UW  -8   
 8 N107US  -2.5 
 9 N108UW  -3   
10 N110UW  -3   
# ℹ 3,078 more rows</code></pre>
</div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tailnum) <span class="sc">|&gt;</span> </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())<span class="co">#now you also now on how many flights your average is based on. You don't want to base any conclusion on a small number of observation. Check the # of flights for the tail number D942DN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,088 × 3
   tailnum delay     n
   &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;
 1 N0EGMQ   3.81    16
 2 N10156  54        4
 3 N102UW  -1        1
 4 N103US   0        2
 5 N104UW  28.7      3
 6 N10575  30       19
 7 N105UW  -8        1
 8 N107US  -2.5      2
 9 N108UW  -3        3
10 N110UW  -3        1
# ℹ 3,078 more rows</code></pre>
</div>
</div>
</section>
<section id="recap-of-the-summary-functions" class="level3">
<h3 class="anchored" data-anchor-id="recap-of-the-summary-functions">Recap of the summary functions</h3>
<p>Just using means and counts can get you a long way, but R provides many other useful summary functions that should be taken in consideration when producing descriptive statistics. Here is a list of the most useful ones with many opportunities to practice them in the activities belpw:</p>
<ul>
<li><p>Measures of location: mean(x) and median(x) . The mean is the sum divided by the length; the median is a value where 50% of x is above it, and 50% is below it.</p></li>
<li><p>Measures of spread: sd(x). The root mean squared deviation, or standard deviation sd(x), is the standard measure of spread.</p></li>
<li><p>Measures of rank: min(x) and max(x). The min will help you identify the smallest value, while the max allows you to find the largest value in column.</p></li>
</ul>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">#measures of location example</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_delay =</span> <span class="fu">mean</span>(dep_delay),</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_delay =</span> <span class="fu">median</span>(dep_delay)) <span class="co"># the average positive delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 5
# Groups:   year, month [12]
    year month   day avg_delay median_delay
   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;
 1  2013     1     1    16.7              0
 2  2013     1     2     6.53            -1
 3  2013     1     3    16.4              0
 4  2013     1     4    22.5              1
 5  2013     1     5     1.15            -2
 6  2013     1     6     4.42            -3
 7  2013     1     7     4.75            -2
 8  2013     1     8     3.49            -2
 9  2013     1     9     0.432           -4
10  2013     1    10     0.396           -4
# ℹ 355 more rows</code></pre>
</div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co">#measures of spread example</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest) <span class="sc">|&gt;</span> </span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">distance_sd =</span> <span class="fu">sd</span>(distance)) <span class="sc">|&gt;</span> </span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(distance_sd))<span class="co"># Is distance to some destinations more variable than to others?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 99 × 2
   dest  distance_sd
   &lt;chr&gt;       &lt;dbl&gt;
 1 HNL         10.2 
 2 LAS         10.2 
 3 PDX         10.1 
 4 SFO          9.99
 5 SAN          9.98
 6 PHX          9.88
 7 SEA          9.86
 8 EGE          9.61
 9 LAX          9.56
10 CVG          9.17
# ℹ 89 more rows</code></pre>
</div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">#measures of rank example</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>not_cancelled <span class="sc">|&gt;</span> </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">first =</span> <span class="fu">min</span>(dep_time),</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">last =</span> <span class="fu">max</span>(dep_time)</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>  )<span class="co"># When do the first and last flights leave each day?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 5
# Groups:   year, month [12]
    year month   day first  last
   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1  2013     1     1   600  2052
 2  2013     1     2   558  2215
 3  2013     1     3   600  2140
 4  2013     1     4   106  2158
 5  2013     1     5   555  2204
 6  2013     1     6   559  2353
 7  2013     1     7   559  2052
 8  2013     1     8   623  2119
 9  2013     1     9   603  2056
10  2013     1    10   618  2129
# ℹ 355 more rows</code></pre>
</div>
</div>
</section>
<section id="activity-7-summary-functions-p1-must-use-the-pipe" class="level3">
<h3 class="anchored" data-anchor-id="activity-7-summary-functions-p1-must-use-the-pipe">Activity 7: Summary functions p1 (must use the pipe)</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Compute the median of the distance variable per each tail number?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Compute the median of the arr_delay variable per each carrier?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Compute the mean and median of the dep_delay variable per each dest?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Compute the mean and median of the air_time variable per each origin?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="activity-8-summary-functions-p2-must-use-the-pipe" class="level3">
<h3 class="anchored" data-anchor-id="activity-8-summary-functions-p2-must-use-the-pipe">Activity 8: Summary functions p2 (must use the pipe)</h3>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find min and max of the distance variable for each tail number?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find min, max and sd of the air_time variable for each carrier?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find min and max of the dep_delay variable for each month?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find min, max and sd of the arr_delay variable for each destination?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="challenge1-you-must-use-the-pipe-to-complete-the-challenge-and-not-create-any-intermediate-objects-one-big-chunk-of-code" class="level5">
<h5 class="anchored" data-anchor-id="challenge1-you-must-use-the-pipe-to-complete-the-challenge-and-not-create-any-intermediate-objects-one-big-chunk-of-code">Challenge1: You must use the pipe to complete the challenge and not create any intermediate objects (one big chunk of code)</h5>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Use the flights dataset and apply the following manipulations at the same time using pipes:</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">#1) Make sure your dataset has only the following columns: month, day, dep_delay, arr_delay, dest, distance, carrier and air_time</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#2) Reorder your data and show them from the highest arr_delay flight to the smallest one.</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#3) Create a column named distance_km that is equal to distance/1.6</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#4) Per each carrier compute the avg_arr_delay, min_arr_delay, max_arr_delay, sd_arr_delay, median_arr_delay and the number of flights operated.</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">#5) Keep in the output only the 5 carriers with the lowest median_arr_delay</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="challenge2-you-must-use-the-pipe-to-complete-the-challenge-and-not-create-any-intermediate-objects-one-big-chunk-of-code" class="level5">
<h5 class="anchored" data-anchor-id="challenge2-you-must-use-the-pipe-to-complete-the-challenge-and-not-create-any-intermediate-objects-one-big-chunk-of-code">Challenge2: You must use the pipe to complete the challenge and not create any intermediate objects (one big chunk of code)</h5>
<div class="cell" data-exercise="true">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Use the flights dataset and apply the following manipulations at the same time using pipes:</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co">#1) Keep only flights departed from JFK in February</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">#2) Make sure your dataset has only the following columns: day, dep_delay, arr_delay, dest,and carrier </span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co">#3) Create a column named final_delay that is equal to arr_delay- dep_delay</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">#4) Per each dest compute the avg_final_delay, min_final_delay, max_final_delay, sd_final_delay, median_final_delay and the number of flights landed there.</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co">#5) Reorder your data and show them from the highest median_final_delay to the smallest one.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="when-not-to-use-the-pipe" class="level3">
<h3 class="anchored" data-anchor-id="when-not-to-use-the-pipe">When not to use the pipe</h3>
<p>The pipe operator is a powerful tool, but it’s not the only tool at your disposal, and it doesn’t solve every problem! Pipes are most useful for rewriting a fairly short linear sequence of operations. I think you should reach for another tool when:</p>
<ul>
<li><p>Your pipes are longer than (say) ten steps. In that case, create intermediate objects with meaningful names. That will make debugging easier, because you can more easily check the intermediate results, and it makes it easier to understand your code, because the variable names can help communicate intent.</p></li>
<li><p>You have multiple inputs or outputs. If there isn’t one primary object being transformed, but two or more objects being combined together, don’t use the pipe.</p></li>
</ul>
</section>
</section>
<section id="now-that-you-know-how-to-manipulate-your-data.what-about-learning-how-to-visualize-them-see-you-for-more-in-the-next-chapter" class="level2">
<h2 class="anchored" data-anchor-id="now-that-you-know-how-to-manipulate-your-data.what-about-learning-how-to-visualize-them-see-you-for-more-in-the-next-chapter">Now that you know how to manipulate your data.What about learning how to visualize them? See you for more in the next chapter!</h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/omis482-f2024-class-website\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, Dr.&nbsp;B</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Created by Dr.B and Venkata to enhance your learning</p>
</div>
  </div>
</footer>




</body></html>